ğŸ” DIAGNÃ“STICO COMPLETO - Execute estes comandos:

1ï¸âƒ£ Quantos produtos ATIVOS existem agora?

psql $DATABASE_URL -c "SELECT COUNT(*) as total_ativos FROM products WHERE is_active = true;"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

2ï¸âƒ£ Produtos ativos que foram atualizados/criados HOJE:

psql $DATABASE_URL -c "
SELECT COUNT(*) as produtos_ativos_hoje
FROM products
WHERE is_active = true
  AND (
    DATE(updated_at AT TIME ZONE 'UTC' AT TIME ZONE 'America/Sao_Paulo') = CURRENT_DATE
    OR DATE(created_at AT TIME ZONE 'UTC' AT TIME ZONE 'America/Sao_Paulo') = CURRENT_DATE
  );
"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

3ï¸âƒ£ Se os produtos estÃ£o ativos mas nÃ£o aparecem no frontend,
   pode ser problema de filtro. Vamos verificar o que o frontend
   estÃ¡ buscando. 

   Execute este comando para ver se hÃ¡ produtos ativos de HOJE:

psql $DATABASE_URL -c "
SELECT COUNT(*) as total
FROM products p
WHERE p.is_active = true
  AND (
    DATE(p.updated_at AT TIME ZONE 'UTC' AT TIME ZONE 'America/Sao_Paulo') = CURRENT_DATE
    OR DATE(p.created_at AT TIME ZONE 'UTC' AT TIME ZONE 'America/Sao_Paulo') = CURRENT_DATE
  );
"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

4ï¸âƒ£ Se nÃ£o houver produtos de hoje, vamos restaurar TODOS os
   produtos inativos das Ãºltimas 48 horas:

psql $DATABASE_URL -c "
UPDATE products 
SET is_active = true, updated_at = NOW()
WHERE is_active = false
  AND updated_at >= NOW() - INTERVAL '48 hours';
"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ME DIGA:
- Quantos produtos ATIVOS existem agora? (comando 1)
- Quantos produtos ATIVOS de HOJE existem? (comando 2)

Com essas informaÃ§Ãµes, vou saber exatamente o que fazer!

