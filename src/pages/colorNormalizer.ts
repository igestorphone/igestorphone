// Mapeamento de cores por modelo específico de iPhone
export const modelColorMappings: Record<string, Record<string, string>> = {
  // iPhone 11
  'iphone 11': {
    'preto': 'Preto',
    'black': 'Preto',
    'branco': 'Branco',
    'white': 'Branco',
    'verde': 'Verde',
    'green': 'Verde',
    'amarelo': 'Amarelo',
    'yellow': 'Amarelo',
    'roxo': 'Roxo',
    'purple': 'Roxo',
    'vermelho': 'Vermelho',
    'red': 'Vermelho',
  },
  // iPhone 11 Pro e 11 Pro Max
  'iphone 11 pro': {
    'cinza espacial': 'Cinza Espacial',
    'space gray': 'Cinza Espacial',
    'spacegrey': 'Cinza Espacial',
    'prateado': 'Prateado',
    'silver': 'Prateado',
    'verde meia noite': 'Verde Meia Noite',
    'midnight green': 'Verde Meia Noite',
    'dourado': 'Dourado',
    'gold': 'Dourado',
  },
  'iphone 11 pro max': {
    'cinza espacial': 'Cinza Espacial',
    'space gray': 'Cinza Espacial',
    'spacegrey': 'Cinza Espacial',
    'prateado': 'Prateado',
    'silver': 'Prateado',
    'verde meia noite': 'Verde Meia Noite',
    'midnight green': 'Verde Meia Noite',
    'dourado': 'Dourado',
    'gold': 'Dourado',
  },
  // iPhone 12 e 12 mini
  'iphone 12': {
    'preto': 'Preto',
    'black': 'Preto',
    'branco': 'Branco',
    'white': 'Branco',
    'azul': 'Azul',
    'blue': 'Azul',
    'verde': 'Verde',
    'green': 'Verde',
    'roxo': 'Roxo',
    'purple': 'Roxo',
    'vermelho': 'Vermelho',
    'red': 'Vermelho',
  },
  'iphone 12 mini': {
    'preto': 'Preto',
    'black': 'Preto',
    'branco': 'Branco',
    'white': 'Branco',
    'azul': 'Azul',
    'blue': 'Azul',
    'verde': 'Verde',
    'green': 'Verde',
    'roxo': 'Roxo',
    'purple': 'Roxo',
    'vermelho': 'Vermelho',
    'red': 'Vermelho',
  },
  // iPhone 12 Pro e 12 Pro Max
  'iphone 12 pro': {
    'grafite': 'Grafite',
    'graphite': 'Grafite',
    'prateado': 'Prateado',
    'silver': 'Prateado',
    'azul pacífico': 'Azul Pacífico',
    'pacific blue': 'Azul Pacífico',
    'dourado': 'Dourado',
    'gold': 'Dourado',
  },
  'iphone 12 pro max': {
    'grafite': 'Grafite',
    'graphite': 'Grafite',
    'prateado': 'Prateado',
    'silver': 'Prateado',
    'azul pacífico': 'Azul Pacífico',
    'pacific blue': 'Azul Pacífico',
    'dourado': 'Dourado',
    'gold': 'Dourado',
  },
  // iPhone 13 e 13 mini
  'iphone 13': {
    'meia noite': 'Meia Noite',
    'midnight': 'Meia Noite',
    'estelar': 'Estelar',
    'starlight': 'Estelar',
    'azul': 'Azul',
    'blue': 'Azul',
    'rosa': 'Rosa',
    'pink': 'Rosa',
    'verde': 'Verde',
    'green': 'Verde',
    'vermelho': 'Vermelho',
    'red': 'Vermelho',
  },
  'iphone 13 mini': {
    'meia noite': 'Meia Noite',
    'midnight': 'Meia Noite',
    'estelar': 'Estelar',
    'starlight': 'Estelar',
    'azul': 'Azul',
    'blue': 'Azul',
    'rosa': 'Rosa',
    'pink': 'Rosa',
    'verde': 'Verde',
    'green': 'Verde',
    'vermelho': 'Vermelho',
    'red': 'Vermelho',
  },
  // iPhone 13 Pro e 13 Pro Max
  'iphone 13 pro': {
    'grafite': 'Grafite',
    'graphite': 'Grafite',
    'prateado': 'Prateado',
    'silver': 'Prateado',
    'azul sierra': 'Azul Sierra',
    'sierra blue': 'Azul Sierra',
    'verde alpino': 'Verde Alpino',
    'alpine green': 'Verde Alpino',
  },
  'iphone 13 pro max': {
    'grafite': 'Grafite',
    'graphite': 'Grafite',
    'prateado': 'Prateado',
    'silver': 'Prateado',
    'azul sierra': 'Azul Sierra',
    'sierra blue': 'Azul Sierra',
    'verde alpino': 'Verde Alpino',
    'alpine green': 'Verde Alpino',
  },
  // iPhone 14 e 14 Plus
  'iphone 14': {
    'meia noite': 'Meia Noite',
    'midnight': 'Meia Noite',
    'estelar': 'Estelar',
    'starlight': 'Estelar',
    'azul': 'Azul',
    'blue': 'Azul',
    'roxo': 'Roxo',
    'purple': 'Roxo',
    'amarelo': 'Amarelo',
    'yellow': 'Amarelo',
    'vermelho': 'Vermelho',
    'red': 'Vermelho',
  },
  'iphone 14 plus': {
    'meia noite': 'Meia Noite',
    'midnight': 'Meia Noite',
    'estelar': 'Estelar',
    'starlight': 'Estelar',
    'azul': 'Azul',
    'blue': 'Azul',
    'roxo': 'Roxo',
    'purple': 'Roxo',
    'amarelo': 'Amarelo',
    'yellow': 'Amarelo',
    'vermelho': 'Vermelho',
    'red': 'Vermelho',
  },
  // iPhone 14 Pro e 14 Pro Max
  'iphone 14 pro': {
    'preto espacial': 'Preto Espacial',
    'space black': 'Preto Espacial',
    'prateado': 'Prateado',
    'silver': 'Prateado',
    'dourado': 'Dourado',
    'gold': 'Dourado',
    'roxo profundo': 'Roxo Profundo',
    'deep purple': 'Roxo Profundo',
  },
  'iphone 14 pro max': {
    'preto espacial': 'Preto Espacial',
    'space black': 'Preto Espacial',
    'prateado': 'Prateado',
    'silver': 'Prateado',
    'dourado': 'Dourado',
    'gold': 'Dourado',
    'roxo profundo': 'Roxo Profundo',
    'deep purple': 'Roxo Profundo',
  },
  // iPhone 15 e 15 Plus
  'iphone 15': {
    'preto': 'Preto',
    'black': 'Preto',
    'azul': 'Azul',
    'blue': 'Azul',
    'verde': 'Verde',
    'green': 'Verde',
    'amarelo': 'Amarelo',
    'yellow': 'Amarelo',
    'rosa': 'Rosa',
    'pink': 'Rosa',
  },
  'iphone 15 plus': {
    'preto': 'Preto',
    'black': 'Preto',
    'azul': 'Azul',
    'blue': 'Azul',
    'verde': 'Verde',
    'green': 'Verde',
    'amarelo': 'Amarelo',
    'yellow': 'Amarelo',
    'rosa': 'Rosa',
    'pink': 'Rosa',
  },
  // iPhone 15 Pro e 15 Pro Max
  'iphone 15 pro': {
    'titânio natural': 'Titânio Natural',
    'natural titanium': 'Titânio Natural',
    'titanium natural': 'Titânio Natural',
    'titânio azul': 'Titânio Azul',
    'blue titanium': 'Titânio Azul',
    'titanium blue': 'Titânio Azul',
    'titânio branco': 'Titânio Branco',
    'white titanium': 'Titânio Branco',
    'titanium white': 'Titânio Branco',
    'titânio preto': 'Titânio Preto',
    'black titanium': 'Titânio Preto',
    'titanium black': 'Titânio Preto',
  },
  'iphone 15 pro max': {
    'titânio natural': 'Titânio Natural',
    'natural titanium': 'Titânio Natural',
    'titanium natural': 'Titânio Natural',
    'titânio azul': 'Titânio Azul',
    'blue titanium': 'Titânio Azul',
    'titanium blue': 'Titânio Azul',
    'titânio branco': 'Titânio Branco',
    'white titanium': 'Titânio Branco',
    'titanium white': 'Titânio Branco',
    'titânio preto': 'Titânio Preto',
    'black titanium': 'Titânio Preto',
    'titanium black': 'Titânio Preto',
  },
  // iPhone 16 e 16 Plus
  'iphone 16': {
    'preto': 'Preto',
    'black': 'Preto',
    'branco': 'Branco',
    'white': 'Branco',
    'verde': 'Verde',
    'green': 'Verde',
    'rosa': 'Rosa',
    'pink': 'Rosa',
    'azul ultramarine': 'Azul Ultramarine',
    'ultramarine blue': 'Azul Ultramarine',
  },
  'iphone 16 plus': {
    'preto': 'Preto',
    'black': 'Preto',
    'branco': 'Branco',
    'white': 'Branco',
    'verde': 'Verde',
    'green': 'Verde',
    'rosa': 'Rosa',
    'pink': 'Rosa',
    'azul ultramarine': 'Azul Ultramarine',
    'ultramarine blue': 'Azul Ultramarine',
  },
  // iPhone 16 Pro e 16 Pro Max
  'iphone 16 pro': {
    'titânio natural': 'Titânio Natural',
    'natural titanium': 'Titânio Natural',
    'titanium natural': 'Titânio Natural',
    'titânio branco': 'Titânio Branco',
    'white titanium': 'Titânio Branco',
    'titanium white': 'Titânio Branco',
    'titânio preto': 'Titânio Preto',
    'black titanium': 'Titânio Preto',
    'titanium black': 'Titânio Preto',
    'desert titanium': 'Desert Titanium',
    'titânio desert': 'Desert Titanium',
  },
  'iphone 16 pro max': {
    'titânio natural': 'Titânio Natural',
    'natural titanium': 'Titânio Natural',
    'titanium natural': 'Titânio Natural',
    'titânio branco': 'Titânio Branco',
    'white titanium': 'Titânio Branco',
    'titanium white': 'Titânio Branco',
    'titânio preto': 'Titânio Preto',
    'black titanium': 'Titânio Preto',
    'titanium black': 'Titânio Preto',
    'desert titanium': 'Desert Titanium',
    'titânio desert': 'Desert Titanium',
  },
  // iPhone 17 (normal)
  'iphone 17': {
    'preto': 'Preto',
    'black': 'Preto',
    'branco': 'Branco',
    'white': 'Branco',
    'lavanda': 'Lavanda',
    'lavender': 'Lavanda',
    'mist blue': 'Mist Blue',
    'azul névoa': 'Mist Blue',
    'azul-nevoa': 'Mist Blue',
    'azul nevoa': 'Mist Blue',
    'sage': 'Sage',
    'sálvia': 'Sage',
    'salvia': 'Sage',
  },
  // iPhone 17 Pro e 17 Pro Max
  'iphone 17 pro': {
    'cosmic orange': 'Cosmic Orange',
    'laranja cósmico': 'Cosmic Orange',
    'deep blue': 'Deep Blue',
    'azul profundo': 'Deep Blue',
    'silver': 'Silver',
    'prata': 'Silver',
    'prateado': 'Silver',
  },
  'iphone 17 pro max': {
    'cosmic orange': 'Cosmic Orange',
    'laranja cósmico': 'Cosmic Orange',
    'deep blue': 'Deep Blue',
    'azul profundo': 'Deep Blue',
    'silver': 'Silver',
    'prata': 'Silver',
    'prateado': 'Silver',
  },
  // iPhone AIR
  'iphone air': {
    'sky blue': 'Sky Blue',
    'azul céu': 'Sky Blue',
    'light gold': 'Light Gold',
    'dourado claro': 'Light Gold',
    'cloud white': 'Cloud White',
    'branco nuvem': 'Cloud White',
    'space black': 'Space Black',
    'preto espacial': 'Space Black',
  },
}

// Função para identificar o modelo do iPhone
export function identifyIPhoneModel(model?: string): string | null {
  if (!model) return null
  
  const lowerModel = model.toLowerCase().trim()
  
  // Verificar modelos específicos primeiro (mais específicos primeiro)
  if (lowerModel.includes('iphone 17 pro max')) return 'iphone 17 pro max'
  if (lowerModel.includes('iphone 17 pro')) return 'iphone 17 pro'
  if (lowerModel.includes('iphone 17')) return 'iphone 17'
  
  if (lowerModel.includes('iphone 16 pro max')) return 'iphone 16 pro max'
  if (lowerModel.includes('iphone 16 pro')) return 'iphone 16 pro'
  if (lowerModel.includes('iphone 16 plus')) return 'iphone 16 plus'
  if (lowerModel.includes('iphone 16')) return 'iphone 16'
  
  if (lowerModel.includes('iphone 15 pro max')) return 'iphone 15 pro max'
  if (lowerModel.includes('iphone 15 pro')) return 'iphone 15 pro'
  if (lowerModel.includes('iphone 15 plus')) return 'iphone 15 plus'
  if (lowerModel.includes('iphone 15')) return 'iphone 15'
  
  if (lowerModel.includes('iphone 14 pro max')) return 'iphone 14 pro max'
  if (lowerModel.includes('iphone 14 pro')) return 'iphone 14 pro'
  if (lowerModel.includes('iphone 14 plus')) return 'iphone 14 plus'
  if (lowerModel.includes('iphone 14')) return 'iphone 14'
  
  if (lowerModel.includes('iphone 13 pro max')) return 'iphone 13 pro max'
  if (lowerModel.includes('iphone 13 pro')) return 'iphone 13 pro'
  if (lowerModel.includes('iphone 13 mini')) return 'iphone 13 mini'
  if (lowerModel.includes('iphone 13')) return 'iphone 13'
  
  if (lowerModel.includes('iphone 12 pro max')) return 'iphone 12 pro max'
  if (lowerModel.includes('iphone 12 pro')) return 'iphone 12 pro'
  if (lowerModel.includes('iphone 12 mini')) return 'iphone 12 mini'
  if (lowerModel.includes('iphone 12')) return 'iphone 12'
  
  if (lowerModel.includes('iphone 11 pro max')) return 'iphone 11 pro max'
  if (lowerModel.includes('iphone 11 pro')) return 'iphone 11 pro'
  if (lowerModel.includes('iphone 11')) return 'iphone 11'
  
  if (lowerModel.includes('iphone air')) return 'iphone air'
  
  return null
}

// Função para normalizar cores baseada no modelo
export function normalizeColor(color: string, model?: string): string {
  if (!color) return 'N/A'
  
  const lower = color.toLowerCase().trim()
  const identifiedModel = identifyIPhoneModel(model)
  
  // Se encontrou o modelo, usar mapeamento específico
  if (identifiedModel && modelColorMappings[identifiedModel]) {
    const modelMapping = modelColorMappings[identifiedModel]
    
    // Tentar mapeamento completo primeiro
    if (modelMapping[lower]) {
      return modelMapping[lower]
    }
    
    // Tentar por palavras individuais (para cores compostas)
    const words = lower.split(/\s+/)
    for (const word of words) {
      if (modelMapping[word]) {
        return modelMapping[word]
      }
    }
    
    // Tentar combinações (ex: "titanium blue" -> "titânio azul")
    const fullPhrase = words.join(' ')
    if (modelMapping[fullPhrase]) {
      return modelMapping[fullPhrase]
    }
  }
  
  // Se não encontrou mapeamento específico, retornar cor original capitalizada
  const capitalized = color.charAt(0).toUpperCase() + color.slice(1).toLowerCase()
  return capitalized
}

