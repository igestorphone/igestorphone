ðŸš¨ SOLUÃ‡ÃƒO PARA RESTAURAR PRODUTOS RESETADOS ðŸš¨

O comando anterior retornou UPDATE 0, entÃ£o vamos diagnosticar primeiro.

Execute estes comandos no Render Shell, UM POR VEZ:

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ DIAGNOSTICAR: Ver produtos desativados nas Ãºltimas 24h

psql $DATABASE_URL -c "
SELECT COUNT(*) as desativados_24h
FROM products
WHERE is_active = false
  AND updated_at >= NOW() - INTERVAL '24 hours';
"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

2ï¸âƒ£ VER EXEMPLOS: Ver quais produtos foram desativados

psql $DATABASE_URL -c "
SELECT id, name, model, price, 
       DATE(updated_at AT TIME ZONE 'UTC' AT TIME ZONE 'America/Sao_Paulo') as data_br,
       updated_at
FROM products
WHERE is_active = false
  AND updated_at >= NOW() - INTERVAL '24 hours'
ORDER BY updated_at DESC
LIMIT 10;
"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

3ï¸âƒ£ RESTAURAR TUDO: Restaurar produtos das Ãºltimas 24 horas

psql $DATABASE_URL -c "
UPDATE products 
SET is_active = true, updated_at = NOW()
WHERE is_active = false
  AND updated_at >= NOW() - INTERVAL '24 hours';
"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

4ï¸âƒ£ VERIFICAR: Ver quantos produtos estÃ£o ativos agora

psql $DATABASE_URL -c "
SELECT COUNT(*) as produtos_ativos
FROM products
WHERE is_active = true;
"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Se ainda nÃ£o funcionar, tente restaurar das Ãºltimas 48 horas:

psql $DATABASE_URL -c "
UPDATE products 
SET is_active = true, updated_at = NOW()
WHERE is_active = false
  AND updated_at >= NOW() - INTERVAL '48 hours';
"

